<!doctype html>
<html lang="zh-CN" data-theme="dark">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Web Template</title>

    <link
      href="https://cdn.jsdelivr.net/npm/daisyui@5"
      rel="stylesheet"
      type="text/css"
    />

    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.15.8/dist/cdn.min.js"
    ></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.11.19/dayjs.min.js"></script>
  </head>
  <body class="min-h-screen bg-base-200 text-base-content">
    <div x-data="featurePage" class="min-h-screen flex flex-col">
      <header class="border-b border-base-300 bg-base-100/95 backdrop-blur">
        <div
          class="max-w-6xl mx-auto px-4 md:px-6 py-4 flex items-center justify-between gap-4"
        >
          <div class="flex items-center gap-3">
            <div
              class="w-9 h-9 rounded-lg bg-primary/15 text-primary grid place-items-center"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
                class="w-5 h-5"
                aria-hidden="true"
              >
                <rect width="7" height="7" x="3" y="3" rx="1"></rect>
                <rect width="7" height="7" x="14" y="3" rx="1"></rect>
                <rect width="7" height="7" x="14" y="14" rx="1"></rect>
                <rect width="7" height="7" x="3" y="14" rx="1"></rect>
              </svg>
            </div>
            <div>
              <p class="font-semibold leading-tight">AI Coding Kit / Web</p>
              <p class="text-xs opacity-70">Single-file HTML template</p>
            </div>
          </div>

          <nav class="hidden md:flex items-center gap-5 text-sm opacity-80">
            <a href="#intro" class="link link-hover">介绍</a>
            <a href="#features" class="link link-hover">特性</a>
            <a href="#demo" class="link link-hover">Demo</a>
            <a href="#guide" class="link link-hover">模板用法</a>
          </nav>
        </div>
      </header>

      <div class="relative z-20">
        <div
          x-show="$store.alert.visible"
          x-transition:enter="transition ease-out duration-200"
          x-transition:enter-start="opacity-0 -translate-y-2"
          x-transition:enter-end="opacity-100 translate-y-0"
          x-transition:leave="transition ease-in duration-150"
          x-transition:leave-start="opacity-100 translate-y-0"
          x-transition:leave-end="opacity-0 -translate-y-2"
          class="absolute inset-x-0 pt-2"
          role="alert"
        >
          <div class="max-w-6xl mx-auto px-4 md:px-6">
            <div :class="'alert alert-' + $store.alert.type" class="shadow-md">
              <span x-text="$store.alert.message"></span>
              <button
                class="btn btn-ghost btn-sm btn-square ml-auto"
                @click="$store.alert.dismiss()"
              >
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  class="w-4 h-4"
                  aria-hidden="true"
                >
                  <path d="M18 6 6 18"></path>
                  <path d="m6 6 12 12"></path>
                </svg>
              </button>
            </div>
          </div>
        </div>
      </div>

      <main class="flex-1">
        <section
          id="intro"
          class="max-w-6xl mx-auto px-4 md:px-6 pt-10 md:pt-14"
        >
          <div class="card bg-base-100 shadow-sm border border-base-300">
            <div class="card-body md:p-8 gap-6">
              <div class="space-y-3">
                <h1 class="text-2xl md:text-3xl font-bold tracking-tight">
                  可直接复用的单文件 Web 模板
                </h1>
                <p class="opacity-80 leading-relaxed max-w-3xl">
                  这个模板用于快速搭建无需构建流程的页面：依赖走 CDN，交互用
                  Alpine，网络请求用 fetch，样式基于 Tailwind +
                  DaisyUI。页面结构已经按“导航、内容、页脚”拆好，能直接复制改业务。
                </p>
              </div>
              <div class="flex flex-wrap gap-3">
                <button
                  class="btn btn-primary"
                  @click="fetchDemoItems()"
                  :disabled="isLoadingRead"
                >
                  读取 Demo 数据
                </button>
                <button
                  class="btn btn-outline"
                  @click="submitDemo()"
                  :disabled="isSubmitting"
                  :class="{ 'loading': isSubmitting }"
                >
                  模拟写操作
                </button>
                <span
                  class="text-sm opacity-70 self-center"
                  x-show="lastUpdated"
                >
                  最近更新：<span x-text="lastUpdated"></span>
                </span>
              </div>
            </div>
          </div>
        </section>

        <section id="features" class="max-w-6xl mx-auto px-4 md:px-6 mt-8">
          <div class="grid gap-4 md:grid-cols-3">
            <article class="card bg-base-100 shadow-sm border border-base-300">
              <div class="card-body">
                <h2 class="card-title text-base">统一技术约束</h2>
                <p class="text-sm opacity-75">
                  单文件 HTML、内联 JS、内联 SVG
                  图标，避免额外构建链路和隐式依赖。
                </p>
              </div>
            </article>
            <article class="card bg-base-100 shadow-sm border border-base-300">
              <div class="card-body">
                <h2 class="card-title text-base">读写交互基线</h2>
                <p class="text-sm opacity-75">
                  读操作提供 loading 与错误重试；写操作提供按钮 loading
                  和统一反馈。
                </p>
              </div>
            </article>
            <article class="card bg-base-100 shadow-sm border border-base-300">
              <div class="card-body">
                <h2 class="card-title text-base">可扩展模板骨架</h2>
                <p class="text-sm opacity-75">
                  你只需要替换数据模型与渲染区块，不用重建页面框架。
                </p>
              </div>
            </article>
          </div>
        </section>

        <section id="demo" class="max-w-6xl mx-auto px-4 md:px-6 mt-8">
          <div class="card bg-base-100 shadow-sm border border-base-300">
            <div class="card-body">
              <div class="flex items-center justify-between gap-3">
                <h2 class="card-title">读取 Demo（JSONPlaceholder）</h2>
                <button
                  class="btn btn-sm btn-ghost"
                  @click="fetchDemoItems()"
                  :disabled="isLoadingRead"
                >
                  刷新
                </button>
              </div>

              <div x-show="isLoadingRead" class="space-y-3">
                <div class="skeleton h-12 w-full"></div>
                <div class="skeleton h-12 w-full"></div>
                <div class="skeleton h-12 w-full"></div>
              </div>

              <div x-show="readError" class="alert alert-error" role="alert">
                <span x-text="readError"></span>
                <button class="btn btn-sm" @click="fetchDemoItems()">
                  重试
                </button>
              </div>

              <div
                x-show="!isLoadingRead && !readError"
                class="divide-y divide-base-300"
              >
                <template x-for="item in demoItems" :key="item.id">
                  <article class="py-3">
                    <p class="font-medium" x-text="item.title"></p>
                    <p class="text-xs opacity-70 mt-1">
                      #<span x-text="item.id"></span> ·
                      <span x-text="formatDate(item.updatedAt)"></span>
                    </p>
                  </article>
                </template>
              </div>
            </div>
          </div>
        </section>

        <section id="guide" class="max-w-6xl mx-auto px-4 md:px-6 mt-8 pb-12">
          <div class="card bg-base-100 shadow-sm border border-base-300">
            <div class="card-body">
              <h2 class="card-title">模板使用建议</h2>
              <ol class="list-decimal list-inside space-y-2 text-sm opacity-80">
                <li>保留头部导航、全局提示条、主内容区、页脚四段结构。</li>
                <li>
                  按业务重命名 `featurePage` 与状态字段，保持 `alpine:init`
                  初始化入口。
                </li>
                <li>
                  读请求遵循 loading + 错误重试，写请求遵循按钮 loading +
                  反馈提示。
                </li>
                <li>图标直接贴内联 SVG，避免引入额外图标运行时。</li>
              </ol>
            </div>
          </div>
        </section>
      </main>

      <footer class="border-t border-base-300 bg-base-100">
        <div
          class="max-w-6xl mx-auto px-4 md:px-6 py-5 text-sm opacity-70 flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2"
        >
          <p>© <span x-text="new Date().getFullYear()"></span> AI Coding Kit</p>
          <div class="flex items-center gap-3">
            <p>Template: single-file HTML + Alpine</p>
            <a
              href="https://github.com/Pony-Unicorn/ai-coding-kit"
              target="_blank"
              rel="noopener noreferrer"
              class="inline-flex items-center justify-center hover:text-primary transition-colors"
              aria-label="GitHub Repository"
              title="GitHub"
            >
              <svg
                xmlns="http://www.w3.org/2000/svg"
                viewBox="0 0 24 24"
                fill="currentColor"
                class="w-5 h-5"
                aria-hidden="true"
              >
                <path
                  d="M12 .5a12 12 0 0 0-3.79 23.39c.6.11.82-.26.82-.58v-2.02c-3.34.73-4.04-1.42-4.04-1.42-.55-1.38-1.34-1.75-1.34-1.75-1.09-.75.08-.73.08-.73 1.21.08 1.85 1.23 1.85 1.23 1.07 1.82 2.82 1.29 3.5.99.11-.77.42-1.29.76-1.59-2.67-.3-5.48-1.33-5.48-5.9 0-1.3.47-2.37 1.23-3.2-.12-.3-.53-1.53.12-3.19 0 0 1.01-.32 3.3 1.22a11.5 11.5 0 0 1 6 0c2.29-1.54 3.3-1.22 3.3-1.22.65 1.66.24 2.89.12 3.19.77.83 1.23 1.9 1.23 3.2 0 4.59-2.82 5.6-5.5 5.89.43.37.82 1.11.82 2.24v3.31c0 .32.22.7.83.58A12 12 0 0 0 12 .5Z"
                ></path>
              </svg>
            </a>
          </div>
        </div>
      </footer>
    </div>

    <script>
      const API_BASE = "https://jsonplaceholder.typicode.com";
      let _alertTimer = null;

      document.addEventListener("alpine:init", () => {
        Alpine.store("alert", {
          message: "",
          type: "success",
          visible: false,
          show(msg, type = "success") {
            clearTimeout(_alertTimer);
            this.message = msg;
            this.type = type;
            this.visible = true;
            _alertTimer = setTimeout(() => {
              this.visible = false;
            }, 3000);
          },
          dismiss() {
            clearTimeout(_alertTimer);
            this.visible = false;
          },
        });

        Alpine.data("featurePage", () => ({
          isLoadingRead: false,
          readError: "",
          isSubmitting: false,
          demoItems: [],
          lastUpdated: "",

          async init() {
            await this.fetchDemoItems();
          },

          async fetchDemoItems() {
            this.isLoadingRead = true;
            this.readError = "";
            try {
              const response = await fetch(`${API_BASE}/posts?_limit=4`);
              if (!response.ok) {
                throw new Error(`读取失败: HTTP ${response.status}`);
              }
              const data = await response.json();
              this.demoItems = data.map((item) => ({
                id: item.id,
                title: item.title,
                updatedAt: new Date(),
              }));
              this.lastUpdated = dayjs().format("YYYY-MM-DD HH:mm");
            } catch (e) {
              this.readError = e?.message || "读取失败，请稍后重试";
            } finally {
              this.isLoadingRead = false;
            }
          },

          async submitDemo() {
            this.isSubmitting = true;
            try {
              const response = await fetch(`${API_BASE}/posts`, {
                method: "POST",
                headers: {
                  "Content-Type": "application/json",
                },
                body: JSON.stringify({
                  title: "Template demo submit",
                  body: "Write-action demo payload",
                  userId: 1,
                }),
              });
              if (!response.ok) {
                throw new Error(`写入失败: HTTP ${response.status}`);
              }
              await response.json();
              Alpine.store("alert").show("写操作示例成功", "success");
            } catch (e) {
              Alpine.store("alert").show(
                e?.message || "写操作失败，请稍后重试",
                "error",
              );
            } finally {
              this.isSubmitting = false;
            }
          },

          formatDate(date) {
            return dayjs(date).format("YYYY-MM-DD HH:mm");
          },
        }));
      });
    </script>
  </body>
</html>
